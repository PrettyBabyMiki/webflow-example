/*
	Copyright (c) 2004-2007, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/


if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",srcNodeRef:null,domNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},postscript:function(_1,_2){this.create(_1,_2);},create:function(_3,_4){this.srcNodeRef=dojo.byId(_4);this._connects=[];this._attaches=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_3){dojo.mixin(this,_3);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){for(var _5 in this.attributeMap){var _6=this[this.attributeMap[_5]||"domNode"];var _7=this[_5];if(typeof _7!="object"&&(_7!==""||(_3&&_3[_5]))){switch(_5){case "class":dojo.addClass(_6,_7);break;case "style":if(_6.style.cssText){_6.style.cssText+="; "+_7;}else{_6.style.cssText=_7;}break;default:_6.setAttribute(_5,_7);}}}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.doc.createElement("div");},postCreate:function(){},startup:function(){},destroyRecursive:function(_8){this.destroyDescendants();this.destroy();},destroy:function(_9){this.uninitialize();dojo.forEach(this._connects,function(_a){dojo.forEach(_a,dojo.disconnect);});this.destroyRendering(_9);dijit.registry.remove(this.id);},destroyRendering:function(_b){if(this.bgIframe){this.bgIframe.destroy();delete this.bgIframe;}if(this.domNode){dojo._destroyElement(this.domNode);delete this.domNode;}if(this.srcNodeRef){dojo._destroyElement(this.srcNodeRef);delete this.srcNodeRef;}},destroyDescendants:function(){dojo.forEach(this.getDescendants(),function(_c){_c.destroy();});},uninitialize:function(){return false;},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){var _d=dojo.query("[widgetId]",this.domNode);return _d.map(dijit.byNode);},nodesWithKeyClick:["input","button"],connect:function(_e,_f,_10){var _11=[];if(_f=="ondijitclick"){var w=this;if(!this.nodesWithKeyClick[_e.nodeName]){_11.push(dojo.connect(_e,"onkeydown",this,function(e){if(e.keyCode==dojo.keys.ENTER){return (dojo.isString(_10))?w[_10](e):_10.call(w,e);}else{if(e.keyCode==dojo.keys.SPACE){dojo.stopEvent(e);}}}));_11.push(dojo.connect(_e,"onkeyup",this,function(e){if(e.keyCode==dojo.keys.SPACE){return dojo.isString(_10)?w[_10](e):_10.call(w,e);}}));}_f="onclick";}_11.push(dojo.connect(_e,_f,this,_10));this._connects.push(_11);return _11;},disconnect:function(_15){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_15){dojo.forEach(_15,dojo.disconnect);this._connects.splice(i,1);return;}}},isLeftToRight:function(){if(typeof this._ltr=="undefined"){this._ltr=dojo.getComputedStyle(this.domNode).direction!="rtl";}return this._ltr;},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");}});}