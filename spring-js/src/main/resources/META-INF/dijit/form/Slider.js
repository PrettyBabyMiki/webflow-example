/*
	Copyright (c) 2004-2007, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/


if(!dojo._hasResource["dijit.form.Slider"]){dojo._hasResource["dijit.form.Slider"]=true;dojo.provide("dijit.form.Slider");dojo.require("dijit.form._FormWidget");dojo.require("dijit._Container");dojo.require("dojo.dnd.move");dojo.require("dijit.form.Button");dojo.require("dojo.number");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormWidget,dijit._Container],{templateString:"<table class=\"dijit dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,topDecoration\" class=\"dijitReset\" style=\"text-align:center;width:100%;\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitHorizontalSliderButtonContainer\"\n\t\t\t><div class=\"dijitHorizontalSliderDecrementIcon\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\" dojoAttachEvent=\"onclick: decrement\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitHorizontalSliderBumper dijitSliderLeftBumper dijitHorizontalSliderLeftBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" name=\"${name}\"\n\t\t\t/><div style=\"position:relative;\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitHorizontalSliderBar dijitSliderProgressBar dijitHorizontalSliderProgressBar\" dojoAttachEvent=\"onclick:_onBarClick\"\n\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderMoveable dijitHorizontalSliderMoveable\" dojoAttachEvent=\"onkeypress:_onKeyPress,onclick:_onHandleClick\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"\n\t\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitHorizontalSliderImageHandle\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitHorizontalSliderBar dijitSliderRemainingBar dijitHorizontalSliderRemainingBar\" dojoAttachEvent=\"onclick:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitHorizontalSliderBumper dijitSliderRightBumper dijitHorizontalSliderRightBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitHorizontalSliderButtonContainer\" style=\"right:0px;\"\n\t\t\t><div class=\"dijitHorizontalSliderIncrementIcon\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\" dojoAttachEvent=\"onclick: increment\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset\" style=\"text-align:center;\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n",value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,widgetsInTemplate:true,attributeMap:dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),{id:"",name:"valueNode"}),baseClass:"dijitSlider",_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_upsideDown:false,_onKeyPress:function(e){if(this.disabled||e.altKey||e.ctrlKey){return;}switch(e.keyCode){case dojo.keys.HOME:this.setValue(this.minimum,false);break;case dojo.keys.END:this.setValue(this.maximum,false);break;case dojo.keys.UP_ARROW:case (this._isReversed()?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW):case dojo.keys.PAGE_UP:this.increment(e);break;case dojo.keys.DOWN_ARROW:case (this._isReversed()?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW):case dojo.keys.PAGE_DOWN:this.decrement(e);break;default:this.inherited("_onKeyPress",arguments);return;}dojo.stopEvent(e);},_onHandleClick:function(e){if(this.disabled){return;}if(!dojo.isIE){dijit.focus(this.sliderHandle);}dojo.stopEvent(e);},_isReversed:function(){return !(this._upsideDown||this.isLeftToRight());},_onBarClick:function(e){if(this.disabled||!this.clickSelect){return;}dijit.focus(this.sliderHandle);dojo.stopEvent(e);var _4=dojo.coords(this.sliderBarContainer,true);var _5=e[this._mousePixelCoord]-_4[this._startingPixelCoord];this._setPixelValue(this._isReversed()||this._upsideDown?(_4[this._pixelCount]-_5):_5,_4[this._pixelCount],true);},_setPixelValue:function(_6,_7,_8){if(this.disabled){return;}_6=_6<0?0:_7<_6?_7:_6;var _9=this.discreteValues;if(_9<=1||_9==Infinity){_9=_7;}_9--;var _a=_7/_9;var _b=Math.round(_6/_a);this.setValue((this.maximum-this.minimum)*_b/_9+this.minimum,_8);},setValue:function(_c,_d){this.valueNode.value=this.value=_c;this.inherited("setValue",arguments);var _e=(_c-this.minimum)/(this.maximum-this.minimum);this.progressBar.style[this._progressPixelSize]=(_e*100)+"%";this.remainingBar.style[this._progressPixelSize]=((1-_e)*100)+"%";},_bumpValue:function(_f){if(this.disabled){return;}var s=dojo.getComputedStyle(this.sliderBarContainer);var c=dojo._getContentBox(this.sliderBarContainer,s);var _12=this.discreteValues;if(_12<=1||_12==Infinity){_12=c[this._pixelCount];}_12--;var _13=(this.value-this.minimum)*_12/(this.maximum-this.minimum)+_f;if(_13<0){_13=0;}if(_13>_12){_13=_12;}_13=_13*(this.maximum-this.minimum)/_12+this.minimum;this.setValue(_13,true);},decrement:function(e){this._bumpValue(e.keyCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.keyCode==dojo.keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){dojo.stopEvent(evt);var _17=0;if(typeof evt.wheelDelta=="number"){_17=evt.wheelDelta;}else{if(typeof evt.detail=="number"){_17=-evt.detail;}}if(_17>0){this.increment(evt);}else{if(_17<0){this.decrement(evt);}}},startup:function(){dojo.forEach(this.getChildren(),function(_18){if(this[_18.container]!=this.containerNode){this[_18.container].appendChild(_18.domNode);}},this);},_onBlur:function(){dijit.form.HorizontalSlider.superclass.setValue.call(this,this.value,true);},postCreate:function(){if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}this.connect(this.domNode,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _19=this;var _1a=function(){dijit.form._SliderMover.apply(this,arguments);this.widget=_19;};dojo.extend(_1a,dijit.form._SliderMover.prototype);this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:_1a});this.inherited("postCreate",arguments);},destroy:function(){this._movable.destroy();this.inherited("destroy",arguments);}});dojo.declare("dijit.form.VerticalSlider",dijit.form.HorizontalSlider,{templateString:"<table class=\"dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\"\n><tbody class=\"dijitReset\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitVerticalSliderButtonContainer\"\n\t\t\t><div class=\"dijitVerticalSliderIncrementIcon\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\" dojoAttachEvent=\"onclick: increment\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitVerticalSliderBumper dijitSliderTopBumper dijitVerticalSliderTopBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td dojoAttachPoint=\"leftDecoration\" class=\"dijitReset\" style=\"text-align:center;height:100%;\"></td\n\t\t><td class=\"dijitReset\" style=\"height:100%;\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" name=\"${name}\"\n\t\t\t/><center style=\"position:relative;height:100%;\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitVerticalSliderBar dijitSliderRemainingBar dijitVerticalSliderRemainingBar\" dojoAttachEvent=\"onclick:_onBarClick\"></div\n\t\t\t\t><div dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitVerticalSliderBar dijitSliderProgressBar dijitVerticalSliderProgressBar\" dojoAttachEvent=\"onclick:_onBarClick\"\n\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderMoveable\" dojoAttachEvent=\"onkeypress:_onKeyPress,onclick:_onHandleClick\" style=\"vertical-align:top;\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"\n\t\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitVerticalSliderImageHandle\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint=\"containerNode,rightDecoration\" class=\"dijitReset\" style=\"text-align:center;height:100%;\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitVerticalSliderBumper dijitSliderBottomBumper dijitVerticalSliderBottomBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitVerticalSliderButtonContainer\"\n\t\t\t><div class=\"dijitVerticalSliderDecrementIcon\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\" dojoAttachEvent=\"onclick: decrement\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n></tbody></table>\n",_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_startingPixelCount:"t",_handleOffsetCoord:"top",_progressPixelSize:"height",_upsideDown:true});dojo.declare("dijit.form._SliderMover",dojo.dnd.Mover,{onMouseMove:function(e){var _1c=this.widget;var c=this.constraintBox;if(!c){var _1e=_1c.sliderBarContainer;var s=dojo.getComputedStyle(_1e);var c=dojo._getContentBox(_1e,s);c[_1c._startingPixelCount]=0;this.constraintBox=c;}var m=this.marginBox;var _21=_1c._isReversed()?e[_1c._mousePixelCoord]-dojo._abs(_1c.sliderBarContainer).x:m[_1c._startingPixelCount]+e[_1c._mousePixelCoord];dojo.hitch(_1c,"_setPixelValue")(_1c._isReversed()||_1c._upsideDown?(c[_1c._pixelCount]-_21):_21,c[_1c._pixelCount]);},destroy:function(e){var _23=this.widget;_23.setValue(_23.value,true);dojo.dnd.Mover.prototype.destroy.call(this);}});dojo.declare("dijit.form.HorizontalRule",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"RuleContainer HorizontalRuleContainer\"></div>",count:3,container:"containerNode",ruleStyle:"",_positionPrefix:"<div class=\"RuleMark HorizontalRuleMark\" style=\"left:",_positionSuffix:"%;",_suffix:"\"></div>",_genHTML:function(pos,ndx){return this._positionPrefix+pos+this._positionSuffix+this.ruleStyle+this._suffix;},_isHorizontal:true,postCreate:function(){if(this.count==1){var _26=this._genHTML(50,0);}else{var _27=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){var _26=this._genHTML(0,0);for(var i=1;i<this.count-1;i++){_26+=this._genHTML(_27*i,i);}_26+=this._genHTML(100,this.count-1);}else{var _26=this._genHTML(100,0);for(var i=1;i<this.count-1;i++){_26+=this._genHTML(100-_27*i,i);}_26+=this._genHTML(0,this.count-1);}}this.domNode.innerHTML=_26;}});dojo.declare("dijit.form.VerticalRule",dijit.form.HorizontalRule,{templateString:"<div class=\"RuleContainer VerticalRuleContainer\"></div>",_positionPrefix:"<div class=\"RuleMark VerticalRuleMark\" style=\"top:",_isHorizontal:false});dojo.declare("dijit.form.HorizontalRuleLabels",dijit.form.HorizontalRule,{templateString:"<div class=\"RuleContainer HorizontalRuleContainer\"></div>",labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:"<div class=\"RuleLabelContainer HorizontalRuleLabelContainer\" style=\"left:",_labelPrefix:"\"><span class=\"RuleLabel HorizontalRuleLabel\">",_suffix:"</span></div>",_calcPosition:function(pos){return pos;},_genHTML:function(pos,ndx){return this._positionPrefix+this._calcPosition(pos)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[ndx]+this._suffix;},getLabels:function(){var _2c=this.labels;if(!_2c.length){_2c=dojo.query("> li",this.srcNodeRef).map(function(_2d){return String(_2d.innerHTML);});}this.srcNodeRef.innerHTML="";if(!_2c.length&&this.count>1){var _2e=this.minimum;var inc=(this.maximum-_2e)/(this.count-1);for(var i=0;i<this.count;i++){_2c.push((i<this.numericMargin||i>=(this.count-this.numericMargin))?"":dojo.number.format(_2e,this.constraints));_2e+=inc;}}return _2c;},postMixInProperties:function(){this.inherited("postMixInProperties",arguments);this.labels=this.getLabels();this.count=this.labels.length;}});dojo.declare("dijit.form.VerticalRuleLabels",dijit.form.HorizontalRuleLabels,{templateString:"<div class=\"RuleContainer VerticalRuleContainer\"></div>",_positionPrefix:"<div class=\"RuleLabelContainer VerticalRuleLabelContainer\" style=\"top:",_labelPrefix:"\"><span class=\"RuleLabel VerticalRuleLabel\">",_calcPosition:function(pos){return 100-pos;},_isHorizontal:false});}