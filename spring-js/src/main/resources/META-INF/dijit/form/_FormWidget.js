/*
	Copyright (c) 2004-2007, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/


if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",value:"",name:"",id:"",alt:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,attributeMap:dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),{id:"focusNode",tabIndex:"focusNode",alt:"focusNode"}),setDisabled:function(_1){this.domNode.disabled=this.disabled=_1;if(this.focusNode){this.focusNode.disabled=_1;}if(_1){this._hovering=false;this._active=false;}dijit.setWaiState(this.focusNode||this.domNode,"disabled",_1);this._setStateClass();},_onMouse:function(_2){var _3=_2.target;if(_3&&_3.getAttribute){this.stateModifier=_3.getAttribute("stateModifier")||"";}if(!this.disabled){switch(_2.type){case "mouseenter":case "mouseover":this._hovering=true;break;case "mouseout":case "mouseleave":this._hovering=false;break;case "mousedown":this._active=true;var _4=this;var _5=this.connect(dojo.body(),"onmouseup",function(){_4._active=false;_4._setStateClass();_4.disconnect(_5);});break;}this._setStateClass();}},isFocusable:function(){return !this.disabled&&(dojo.style(this.domNode,"display")!="none");},focus:function(){dijit.focus(this.focusNode);},_setStateClass:function(){if(!("staticClass" in this)){this.staticClass=(this.stateNode||this.domNode).className;}var _6=[this.baseClass];function multiply(_7){_6=_6.concat(dojo.map(_6,function(c){return c+_7;}));};if(this.checked){multiply("Checked");}if(this.state){multiply(this.state);}if(this.selected){multiply("Selected");}if(this.disabled){multiply("Disabled");}else{if(this._active){multiply(this.stateModifier+"Active");}else{if(this._focused){multiply("Focused");}if((this.stateModifier||!this._focused)&&this._hovering){multiply(this.stateModifier+"Hover");}}}(this.stateNode||this.domNode).className=this.staticClass+" "+_6.join(" ");},onChange:function(_9){},postCreate:function(){this.setValue(this.value,null);this.setDisabled(this.disabled);this._setStateClass();},setValue:function(_a,_b){this._lastValue=_a;dijit.setWaiState(this.focusNode||this.domNode,"valuenow",this.forWaiValuenow());if(_b===undefined){_b=true;}if(this._lastValueReported==undefined&&_b===null){this._lastValueReported=_a;}if((this.intermediateChanges||_b)&&((_a&&_a.toString)?_a.toString():_a)!==((this._lastValueReported&&this._lastValueReported.toString)?this._lastValueReported.toString():this._lastValueReported)){this._lastValueReported=_a;this.onChange(_a);}},getValue:function(){return this._lastValue;},undo:function(){this.setValue(this._lastValueReported,false);},_onKeyPress:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!e.shiftKey&&!e.ctrlKey&&!e.altKey){var v=this.getValue();var lv=this._lastValueReported;if((typeof lv!="undefined")&&((v!==null&&v.toString)?v.toString():null)!==lv.toString()){this.undo();dojo.stopEvent(e);return false;}}return true;},forWaiValuenow:function(){return this.getValue();}});}