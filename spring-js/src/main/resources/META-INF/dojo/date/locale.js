/*
	Copyright (c) 2004-2007, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/


if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");dojo.require("dojo.date");dojo.require("dojo.cldr.supplemental");dojo.require("dojo.regexp");dojo.require("dojo.string");dojo.require("dojo.i18n");dojo.requireLocalization("dojo.cldr","gregorian",null,"de,en,en-au,en-ca,en-gb,es,es-es,fr,ROOT,it,it-it,ja,ko,ko-kr,pt,pt-br,zh,zh-cn");(function(){function formatPattern(_1,_2,_3){return _3.replace(/([a-z])\1*/ig,function(_4){var s;var c=_4.charAt(0);var l=_4.length;var _8;var _9=["abbr","wide","narrow"];switch(c){case "G":s=_2[(l<4)?"eraAbbr":"eraNames"][_1.getFullYear()<0?0:1];break;case "y":s=_1.getFullYear();switch(l){case 1:break;case 2:s=String(s);s=s.substr(s.length-2);break;default:_8=true;}break;case "Q":case "q":s=Math.ceil((_1.getMonth()+1)/3);_8=true;break;case "M":case "L":var m=_1.getMonth();var _b;switch(l){case 1:case 2:s=m+1;_8=true;break;case 3:case 4:case 5:_b=_9[l-3];break;}if(_b){var _c=(c=="L")?"standalone":"format";var _d=["months",_c,_b].join("-");s=_2[_d][m];}break;case "w":var _e=0;s=dojo.date.locale._getWeekOfYear(_1,_e);_8=true;break;case "d":s=_1.getDate();_8=true;break;case "D":s=dojo.date.locale._getDayOfYear(_1);_8=true;break;case "E":case "e":case "c":var d=_1.getDay();var _b;switch(l){case 1:case 2:if(c=="e"){var _10=dojo.cldr.supplemental.getFirstDayOfWeek(options.locale);d=(d-_10+7)%7;}if(c!="c"){s=d+1;_8=true;break;}case 3:case 4:case 5:_b=_9[l-3];break;}if(_b){var _c=(c=="c")?"standalone":"format";var _d=["days",_c,_b].join("-");s=_2[_d][d];}break;case "a":var _11=(_1.getHours()<12)?"am":"pm";s=_2[_11];break;case "h":case "H":case "K":case "k":var h=_1.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}_8=true;break;case "m":s=_1.getMinutes();_8=true;break;case "s":s=_1.getSeconds();_8=true;break;case "S":s=Math.round(_1.getMilliseconds()*Math.pow(10,l-3));break;case "v":case "z":s=dojo.date.getTimezoneName(_1);if(s){break;}l=4;case "Z":var _13=_1.getTimezoneOffset();var tz=[(_13<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(_13)/60),2),dojo.string.pad(Math.abs(_13)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_3);}if(_8){s=dojo.string.pad(s,l);}return s;});};dojo.date.locale.format=function(_15,_16){_16=_16||{};var _17=dojo.i18n.normalizeLocale(_16.locale);var _18=_16.formatLength||"short";var _19=dojo.date.locale._getGregorianBundle(_17);var str=[];var _1b=dojo.hitch(this,formatPattern,_15,_19);if(_16.selector=="year"){var _1c=_15.getFullYear();if(_17.match(/^zh|^ja/)){_1c+="å¹´";}return _1c;}if(_16.selector!="time"){var _1d=_16.datePattern||_19["dateFormat-"+_18];if(_1d){str.push(_processPattern(_1d,_1b));}}if(_16.selector!="date"){var _1e=_16.timePattern||_19["timeFormat-"+_18];if(_1e){str.push(_processPattern(_1e,_1b));}}var _1f=str.join(" ");return _1f;};dojo.date.locale.regexp=function(_20){return dojo.date.locale._parseInfo(_20).regexp;};dojo.date.locale._parseInfo=function(_21){_21=_21||{};var _22=dojo.i18n.normalizeLocale(_21.locale);var _23=dojo.date.locale._getGregorianBundle(_22);var _24=_21.formatLength||"short";var _25=_21.datePattern||_23["dateFormat-"+_24];var _26=_21.timePattern||_23["timeFormat-"+_24];var _27;if(_21.selector=="date"){_27=_25;}else{if(_21.selector=="time"){_27=_26;}else{_27=_25+" "+_26;}}var _28=[];var re=_processPattern(_27,dojo.hitch(this,_buildDateTimeRE,_28,_23,_21));return {regexp:re,tokens:_28,bundle:_23};};dojo.date.locale.parse=function(_2a,_2b){var _2c=dojo.date.locale._parseInfo(_2b);var _2d=_2c.tokens,_2e=_2c.bundle;var re=new RegExp("^"+_2c.regexp+"$");var _30=re.exec(_2a);if(!_30){return null;}var _31=["abbr","wide","narrow"];var _32=new Date(1972,0);var _33={};var _34="";dojo.forEach(_30,function(v,i){if(!i){return;}var _37=_2d[i-1];var l=_37.length;switch(_37.charAt(0)){case "y":if(l!=2){_32.setFullYear(v);_33.year=v;}else{if(v<100){v=Number(v);var _39=""+new Date().getFullYear();var _3a=_39.substring(0,2)*100;var _3b=Number(_39.substring(2,4));var _3c=Math.min(_3b+20,99);var num=(v<_3c)?_3a+v:_3a-100+v;_32.setFullYear(num);_33.year=num;}else{if(_2b.strict){return null;}_32.setFullYear(v);_33.year=v;}}break;case "M":if(l>2){var _3e=_2e["months-format-"+_31[l-3]].concat();if(!_2b.strict){v=v.replace(".","").toLowerCase();_3e=dojo.map(_3e,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_3e,v);if(v==-1){return null;}}else{v--;}_32.setMonth(v);_33.month=v;break;case "E":case "e":var _40=_2e["days-format-"+_31[l-3]].concat();if(!_2b.strict){v=v.toLowerCase();_40=dojo.map(_40,"".toLowerCase);}v=dojo.indexOf(_40,v);if(v==-1){return null;}break;case "d":_32.setDate(v);_33.date=v;break;case "D":_32.setMonth(0);_32.setDate(v);break;case "a":var am=_2b.am||_2e.am;var pm=_2b.pm||_2e.pm;if(!_2b.strict){var _43=/\./g;v=v.replace(_43,"").toLowerCase();am=am.replace(_43,"").toLowerCase();pm=pm.replace(_43,"").toLowerCase();}if(_2b.strict&&v!=am&&v!=pm){return null;}_34=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return null;}_32.setHours(v);break;case "m":_32.setMinutes(v);break;case "s":_32.setSeconds(v);break;case "S":_32.setMilliseconds(v);}});var _44=_32.getHours();if(_34==="p"&&_44<12){_32.setHours(_44+12);}else{if(_34==="a"&&_44==12){_32.setHours(0);}}if(_33.year&&_32.getFullYear()!=_33.year){return null;}if(_33.month&&_32.getMonth()!=_33.month){return null;}if(_33.date&&_32.getDate()!=_33.date){return null;}return _32;};function _processPattern(_45,_46,_47,_48){var _49=function(x){return x;};_46=_46||_49;_47=_47||_49;_48=_48||_49;var _4b=_45.match(/(''|[^'])+/g);var _4c=false;dojo.forEach(_4b,function(_4d,i){if(!_4d){_4b[i]="";}else{_4b[i]=(_4c?_47:_46)(_4d);_4c=!_4c;}});return _48(_4b.join(""));};function _buildDateTimeRE(_4f,_50,_51,_52){_52=dojo.regexp.escapeString(_52);if(!_51.strict){_52=_52.replace(" a"," ?a");}return _52.replace(/([a-z])\1*/ig,function(_53){var s;var c=_53.charAt(0);var l=_53.length;var p2="",p3="";if(_51.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+":p2+"[1-9]|1[0-2]";break;case "D":s=p2+"[1-9]|"+p3+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case "d":s=p2+"[1-9]|[12]\\d|3[01]";break;case "w":s=p2+"[1-9]|[1-4][0-9]|5[0-3]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_51.am||_50.am||"AM";var pm=_51.pm||_50.pm||"PM";if(_51.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_4f){_4f.push(_53);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};})();(function(){var _5b=[];dojo.date.locale.addCustomFormats=function(_5c,_5d){_5b.push({pkg:_5c,name:_5d});};dojo.date.locale._getGregorianBundle=function(_5e){var _5f={};dojo.forEach(_5b,function(_60){var _61=dojo.i18n.getLocalization(_60.pkg,_60.name,_5e);_5f=dojo.mixin(_5f,_61);},this);return _5f;};})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(_62,_63,use,_65){var _66;var _67=dojo.date.locale._getGregorianBundle(_65);var _68=[_62,use,_63];if(use=="standAlone"){_66=_67[_68.join("-")];}_68[1]="format";return (_66||_67[_68.join("-")]).concat();};dojo.date.locale.isWeekend=function(_69,_6a){var _6b=dojo.cldr.supplemental.getWeekend(_6a);var day=(_69||new Date()).getDay();if(_6b.end<_6b.start){_6b.end+=7;if(day<_6b.start){day+=7;}}return day>=_6b.start&&day<=_6b.end;};dojo.date.locale._getDayOfYear=function(_6d){return dojo.date.difference(new Date(_6d.getFullYear(),0,1),_6d)+1;};dojo.date.locale._getWeekOfYear=function(_6e,_6f){if(arguments.length==1){_6f=0;}var _70=new Date(_6e.getFullYear(),0,1).getDay();var adj=(_70-_6f+7)%7;var _72=Math.floor((dojo.date.locale._getDayOfYear(_6e)+adj-1)/7);if(_70==_6f){_72++;}return _72;};}