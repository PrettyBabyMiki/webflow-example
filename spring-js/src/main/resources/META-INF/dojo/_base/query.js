/*
	Copyright (c) 2004-2007, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/


if(!dojo._hasResource["dojo._base.query"]){dojo._hasResource["dojo._base.query"]=true;dojo.provide("dojo._base.query");dojo.require("dojo._base.NodeList");(function(){var d=dojo;var _2=dojo.isIE?"children":"childNodes";var _3=function(_4){if(_4.charAt(_4.length-1)==">"){_4+=" *";}_4+=" ";var ts=function(s,e){return d.trim(_4.slice(s,e));};var _8=[];var _9=-1;var _a=-1;var _b=-1;var _c=-1;var _d=-1;var _e=-1;var _f=-1;var lc="";var cc="";var _12;var x=0;var ql=_4.length;var _15=null;var _cp=null;var _17=function(){if(_f>=0){var tv=(_f==x)?null:ts(_f,x).toLowerCase();_15[(">~+".indexOf(tv)<0)?"tag":"oper"]=tv;_f=-1;}};var _19=function(){if(_e>=0){_15.id=ts(_e,x).replace(/\\/g,"");_e=-1;}};var _1a=function(){if(_d>=0){_15.classes.push(ts(_d+1,x).replace(/\\/g,""));_d=-1;}};var _1b=function(){_19();_17();_1a();};for(;x<ql,lc=cc,cc=_4.charAt(x);x++){if(lc=="\\"){continue;}if(!_15){_12=x;_15={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null};_f=x;}if(_9>=0){if(cc=="]"){if(!_cp.attr){_cp.attr=ts(_9+1,x);}else{_cp.matchFor=ts((_b||_9+1),x);}var cmf=_cp.matchFor;if(cmf){if((cmf.charAt(0)=="\"")||(cmf.charAt(0)=="'")){_cp.matchFor=cmf.substring(1,cmf.length-1);}}_15.attrs.push(_cp);_cp=null;_9=_b=-1;}else{if(cc=="="){var _1d=("|~^$*".indexOf(lc)>=0)?lc:"";_cp.type=_1d+cc;_cp.attr=ts(_9+1,x-_1d.length);_b=x+1;}}}else{if(_a>=0){if(cc==")"){if(_c>=0){_cp.value=ts(_a+1,x);}_c=_a=-1;}}else{if(cc=="#"){_1b();_e=x+1;}else{if(cc=="."){_1b();_d=x;}else{if(cc==":"){_1b();_c=x;}else{if(cc=="["){_1b();_9=x;_cp={};}else{if(cc=="("){if(_c>=0){_cp={name:ts(_c+1,x),value:null};_15.pseudos.push(_cp);}_a=x;}else{if(cc==" "&&lc!=cc){_1b();if(_c>=0){_15.pseudos.push({name:ts(_c+1,x)});}_15.hasLoops=(_15.pseudos.length||_15.attrs.length||_15.classes.length);_15.query=ts(_12,x);_15.tag=(_15["oper"])?null:(_15.tag||"*");_8.push(_15);_15=null;}}}}}}}}}return _8;};var _1e={"*=":function(_1f,_20){return "[contains(@"+_1f+", '"+_20+"')]";},"^=":function(_21,_22){return "[starts-with(@"+_21+", '"+_22+"')]";},"$=":function(_23,_24){return "[substring(@"+_23+", string-length(@"+_23+")-"+(_24.length-1)+")='"+_24+"']";},"~=":function(_25,_26){return "[contains(concat(' ',@"+_25+",' '), ' "+_26+" ')]";},"|=":function(_27,_28){return "[contains(concat(' ',@"+_27+",' '), ' "+_28+"-')]";},"=":function(_29,_2a){return "[@"+_29+"='"+_2a+"']";}};var _2b=function(_2c,_2d,_2e,_2f){d.forEach(_2d.attrs,function(_30){var _31;if(_30.type&&_2c[_30.type]){_31=_2c[_30.type](_30.attr,_30.matchFor);}else{if(_30.attr.length){_31=_2e(_30.attr);}}if(_31){_2f(_31);}});};var _32=function(_33){var _34=".";var _35=_3(d.trim(_33));while(_35.length){var tqp=_35.shift();var _37;if(tqp.oper==">"){_37="/";tqp=_35.shift();}else{_37="//";}_34+=_37+tqp.tag;if(tqp.id){_34+="[@id='"+tqp.id+"'][1]";}d.forEach(tqp.classes,function(cn){var cnl=cn.length;var _3a=" ";if(cn.charAt(cnl-1)=="*"){_3a="";cn=cn.substr(0,cnl-1);}_34+="[contains(concat(' ',@class,' '), ' "+cn+_3a+"')]";});_2b(_1e,tqp,function(_3b){return "[@"+_3b+"]";},function(_3c){_34+=_3c;});}return _34;};var _3d={};var _3e=function(_3f){if(_3d[_3f]){return _3d[_3f];}var doc=d.doc;var _41=_32(_3f);var tf=function(_43){var ret=[];var _45;try{_45=doc.evaluate(_41,_43,null,XPathResult.ANY_TYPE,null);}catch(e){console.debug("failure in exprssion:",_41,"under:",_43);console.debug(e);}var _46=_45.iterateNext();while(_46){ret.push(_46);_46=_45.iterateNext();}return ret;};return _3d[_3f]=tf;};var _47={};var _48={};var _49=function(_4a,_4b){if(!_4a){return _4b;}if(!_4b){return _4a;}return function(){return _4a.apply(window,arguments)&&_4b.apply(window,arguments);};};var _4c=function(_4d,_4e,_4f,idx){var _51=idx+1;var _52=(_4e.length==_51);var tqp=_4e[idx];if(tqp.oper==">"){var ecn=_4d[_2];if(!ecn||!ecn.length){return;}_51++;_52=(_4e.length==_51);var tf=_56(_4e[idx+1]);for(var x=0,_58=ecn.length,te;x<_58,te=ecn[x];x++){if(tf(te)){if(_52){_4f.push(te);}else{_4c(te,_4e,_4f,_51);}}}}var _5a=_5b(tqp)(_4d);if(_52){while(_5a.length){_4f.push(_5a.shift());}}else{while(_5a.length){_4c(_5a.shift(),_4e,_4f,_51);}}};var _5c=function(_5d,_5e){var ret=[];var x=_5d.length-1,te;while(te=_5d[x--]){_4c(te,_5e,ret,0);}return ret;};var _56=function(q){if(_47[q.query]){return _47[q.query];}var ff=null;if(q.tag){if(q.tag=="*"){ff=_49(ff,function(_64){return (_64.nodeType==1);});}else{ff=_49(ff,function(_65){return ((_65.nodeType==1)&&(q.tag==_65.tagName.toLowerCase()));});}}if(q.id){ff=_49(ff,function(_66){return ((_66.nodeType==1)&&(_66.id==q.id));});}if(q.hasLoops){ff=_49(ff,_67(q));}return _47[q.query]=ff;};var _68=function(_69){var pn=_69.parentNode;var pnc=pn.childNodes;var _6c=-1;var _6d=pn.firstChild;if(!_6d){return _6c;}var ci=_69["__cachedIndex"];var cl=pn["__cachedLength"];if(((typeof cl=="number")&&(cl!=pnc.length))||(typeof ci!="number")){pn["__cachedLength"]=pnc.length;var idx=1;do{if(_6d===_69){_6c=idx;}if(_6d.nodeType==1){_6d["__cachedIndex"]=idx;idx++;}_6d=_6d.nextSibling;}while(_6d);}else{_6c=ci;}return _6c;};var _71=0;var _72="";var _73=function(_74,_75){if(_75=="class"){return _74.className||_72;}if(_75=="for"){return _74.htmlFor||_72;}return _74.getAttribute(_75,2)||_72;};var _76={"*=":function(_77,_78){return function(_79){return (_73(_79,_77).indexOf(_78)>=0);};},"^=":function(_7a,_7b){return function(_7c){return (_73(_7c,_7a).indexOf(_7b)==0);};},"$=":function(_7d,_7e){var _7f=" "+_7e;return function(_80){var ea=" "+_73(_80,_7d);return (ea.lastIndexOf(_7e)==(ea.length-_7e.length));};},"~=":function(_82,_83){var _84=" "+_83+" ";return function(_85){var ea=" "+_73(_85,_82)+" ";return (ea.indexOf(_84)>=0);};},"|=":function(_87,_88){var _89=" "+_88+"-";return function(_8a){var ea=" "+(_8a.getAttribute(_87,2)||"");return ((ea==_88)||(ea.indexOf(_89)==0));};},"=":function(_8c,_8d){return function(_8e){return (_73(_8e,_8c)==_8d);};}};var _8f={"first-child":function(_90,_91){return function(_92){if(_92.nodeType!=1){return false;}var fc=_92.previousSibling;while(fc&&(fc.nodeType!=1)){fc=fc.previousSibling;}return (!fc);};},"last-child":function(_94,_95){return function(_96){if(_96.nodeType!=1){return false;}var nc=_96.nextSibling;while(nc&&(nc.nodeType!=1)){nc=nc.nextSibling;}return (!nc);};},"empty":function(_98,_99){return function(_9a){var cn=_9a.childNodes;var cnl=_9a.childNodes.length;for(var x=cnl-1;x>=0;x--){var nt=cn[x].nodeType;if((nt==1)||(nt==3)){return false;}}return true;};},"not":function(_9f,_a0){var ntf=_56(_3(_a0)[0]);return function(_a2){return (!ntf(_a2));};},"nth-child":function(_a3,_a4){var pi=parseInt;if(_a4=="odd"){return function(_a6){return (((_68(_a6))%2)==1);};}else{if((_a4=="2n")||(_a4=="even")){return function(_a7){return ((_68(_a7)%2)==0);};}else{if(_a4.indexOf("0n+")==0){var _a8=pi(_a4.substr(3));return function(_a9){return (_a9.parentNode[_2][_a8-1]===_a9);};}else{if((_a4.indexOf("n+")>0)&&(_a4.length>3)){var _aa=_a4.split("n+",2);var _ab=pi(_aa[0]);var idx=pi(_aa[1]);return function(_ad){return ((_68(_ad)%_ab)==idx);};}else{if(_a4.indexOf("n")==-1){var _a8=pi(_a4);return function(_ae){return (_68(_ae)==_a8);};}}}}}}};var _af=(d.isIE)?function(_b0){var clc=_b0.toLowerCase();return function(_b2){return _b2[_b0]||_b2[clc];};}:function(_b3){return function(_b4){return (_b4&&_b4.getAttribute&&_b4.hasAttribute(_b3));};};var _67=function(_b5){var _b6=(_48[_b5.query]||_47[_b5.query]);if(_b6){return _b6;}var ff=null;if(_b5.id){if(_b5.tag!="*"){ff=_49(ff,function(_b8){return (_b8.tagName.toLowerCase()==_b5.tag);});}}d.forEach(_b5.classes,function(_b9,idx,arr){var _bc=_b9.charAt(_b9.length-1)=="*";if(_bc){_b9=_b9.substr(0,_b9.length-1);}var re=new RegExp("(?:^|\\s)"+_b9+(_bc?".*":"")+"(?:\\s|$)");ff=_49(ff,function(_be){return re.test(_be.className);});ff.count=idx;});d.forEach(_b5.pseudos,function(_bf){if(_8f[_bf.name]){ff=_49(ff,_8f[_bf.name](_bf.name,_bf.value));}});_2b(_76,_b5,_af,function(_c0){ff=_49(ff,_c0);});if(!ff){ff=function(){return true;};}return _48[_b5.query]=ff;};var _c1={};var _5b=function(_c2,_c3){var _c4=_c1[_c2.query];if(_c4){return _c4;}if(_c2.id&&!_c2.hasLoops&&!_c2.tag){return _c1[_c2.query]=function(_c5){return [d.byId(_c2.id)];};}var _c6=_67(_c2);var _c7;if(_c2.tag&&_c2.id&&!_c2.hasLoops){_c7=function(_c8){var te=d.byId(_c2.id);if(_c6(te)){return [te];}};}else{var _ca;if(!_c2.hasLoops){_c7=function(_cb){var ret=[];var te,x=0,_ca=_cb.getElementsByTagName(_c2.tag);while(te=_ca[x++]){ret.push(te);}return ret;};}else{_c7=function(_cf){var ret=[];var te,x=0,_ca=_cf.getElementsByTagName(_c2.tag);while(te=_ca[x++]){if(_c6(te)){ret.push(te);}}return ret;};}}return _c1[_c2.query]=_c7;};var _d3={};var _d4={"*":d.isIE?function(_d5){return _d5.all;}:function(_d6){return _d6.getElementsByTagName("*");},">":function(_d7){var ret=[];var te,x=0,_db=_d7[_2];while(te=_db[x++]){if(te.nodeType==1){ret.push(te);}}return ret;}};var _dc=function(_dd){var _de=_3(d.trim(_dd));if(_de.length==1){var tt=_5b(_de[0]);tt.nozip=true;return tt;}var sqf=function(_e1){var _e2=_de.slice(0);var _e3;if(_e2[0].oper==">"){_e3=[_e1];}else{_e3=_5b(_e2.shift())(_e1);}return _5c(_e3,_e2);};return sqf;};var _e4=((document["evaluate"]&&!d.isSafari)?function(_e5){var _e6=_e5.split(" ");if((document["evaluate"])&&(_e5.indexOf(":")==-1)&&((true))){if(((_e6.length>2)&&(_e5.indexOf(">")==-1))||(_e6.length>3)||(_e5.indexOf("[")>=0)||((1==_e6.length)&&(0<=_e5.indexOf(".")))){return _3e(_e5);}}return _dc(_e5);}:_dc);var _e7=function(_e8){if(_d4[_e8]){return _d4[_e8];}if(0>_e8.indexOf(",")){return _d4[_e8]=_e4(_e8);}else{var _e9=_e8.split(/\s*,\s*/);var tf=function(_eb){var _ec=0;var ret=[];var tp;while(tp=_e9[_ec++]){ret=ret.concat(_e4(tp,tp.indexOf(" "))(_eb));}return ret;};return _d4[_e8]=tf;}};var _ef=0;var _f0=function(arr){if(arr&&arr.nozip){return d.NodeList._wrap(arr);}var ret=new d.NodeList();if(!arr){return ret;}if(arr[0]){ret.push(arr[0]);}if(arr.length<2){return ret;}_ef++;arr[0]["_zipIdx"]=_ef;for(var x=1,te;te=arr[x];x++){if(arr[x]["_zipIdx"]!=_ef){ret.push(te);}te["_zipIdx"]=_ef;}return ret;};d.query=function(_f5,_f6){if(_f5.constructor==d.NodeList){return _f5;}if(!d.isString(_f5)){return new d.NodeList(_f5);}if(d.isString(_f6)){_f6=d.byId(_f6);}return _f0(_e7(_f5)(_f6||d.doc));};d._filterQueryResult=function(_f7,_f8){var tnl=new d.NodeList();var ff=(_f8)?_56(_3(_f8)[0]):function(){return true;};for(var x=0,te;te=_f7[x];x++){if(ff(te)){tnl.push(te);}}return tnl;};})();}