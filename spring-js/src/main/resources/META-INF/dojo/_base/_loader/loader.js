/*
	Copyright (c) 2004-2007, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/


if(!dojo._hasResource["dojo.foo"]){dojo._hasResource["dojo.foo"]=true;(function(){var d=dojo;dojo.mixin(dojo,{_loadedModules:{},_inFlightCount:0,_hasResource:{},_modulePrefixes:{dojo:{name:"dojo",value:"."},doh:{name:"doh",value:"../util/doh"},tests:{name:"tests",value:"tests"}},_moduleHasPrefix:function(_2){var mp=this._modulePrefixes;return !!(mp[_2]&&mp[_2].value);},_getModulePrefix:function(_4){var mp=this._modulePrefixes;if(this._moduleHasPrefix(_4)){return mp[_4].value;}return _4;},_loadedUrls:[],_postLoad:false,_loaders:[],_unloaders:[],_loadNotifying:false});dojo._loadPath=function(_6,_7,cb){var _9=(((_6.charAt(0)=="/"||_6.match(/^\w+:/)))?"":this.baseUrl)+_6;if(djConfig.cacheBust&&d.isBrowser){_9+="?"+String(djConfig.cacheBust).replace(/\W+/g,"");}try{return !_7?this._loadUri(_9,cb):this._loadUriAndCheck(_9,_7,cb);}catch(e){console.debug(e);return false;}};dojo._loadUri=function(_a,cb){if(this._loadedUrls[_a]){return true;}var _c=this._getText(_a,true);if(!_c){return false;}this._loadedUrls[_a]=true;this._loadedUrls.push(_a);if(cb){_c="("+_c+")";}var _d=d["eval"](_c+"\r\n//@ sourceURL="+_a);if(cb){cb(_d);}return true;};dojo._loadUriAndCheck=function(_e,_f,cb){var ok=false;try{ok=this._loadUri(_e,cb);}catch(e){console.debug("failed loading "+_e+" with error: "+e);}return Boolean(ok&&this._loadedModules[_f]);};dojo.loaded=function(){this._loadNotifying=true;this._postLoad=true;var mll=this._loaders;this._loaders=[];for(var x=0;x<mll.length;x++){mll[x]();}this._loadNotifying=false;if(d._postLoad&&d._inFlightCount==0&&this._loaders.length>0){d._callLoaded();}};dojo.unloaded=function(){var mll=this._unloaders;while(mll.length){(mll.pop())();}};dojo.addOnLoad=function(obj,_16){if(arguments.length==1){d._loaders.push(obj);}else{if(arguments.length>1){d._loaders.push(function(){obj[_16]();});}}if(d._postLoad&&d._inFlightCount==0&&!d._loadNotifying){d._callLoaded();}};dojo.addOnUnload=function(obj,_18){if(arguments.length==1){d._unloaders.push(obj);}else{if(arguments.length>1){d._unloaders.push(function(){obj[_18]();});}}};dojo._modulesLoaded=function(){if(d._postLoad){return;}if(d._inFlightCount>0){console.debug("files still in flight!");return;}d._callLoaded();};dojo._callLoaded=function(){if(typeof setTimeout=="object"||(djConfig["useXDomain"]&&d.isOpera)){setTimeout("dojo.loaded();",0);}else{d.loaded();}};dojo._getModuleSymbols=function(_19){var _1a=_19.split(".");for(var i=_1a.length;i>0;i--){var _1c=_1a.slice(0,i).join(".");if((i==1)&&!this._moduleHasPrefix(_1c)){_1a[0]="../"+_1a[0];}else{var _1d=this._getModulePrefix(_1c);if(_1d!=_1c){_1a.splice(0,i,_1d);break;}}}return _1a;};dojo._global_omit_module_check=false;dojo._loadModule=dojo.require=function(_1e,_1f){_1f=this._global_omit_module_check||_1f;var _20=this._loadedModules[_1e];if(_20){return _20;}var _21=this._getModuleSymbols(_1e).join("/")+".js";var _22=(!_1f)?_1e:null;var ok=this._loadPath(_21,_22);if((!ok)&&(!_1f)){throw new Error("Could not load '"+_1e+"'; last tried '"+_21+"'");}if((!_1f)&&(!this["_isXDomain"])){_20=this._loadedModules[_1e];if(!_20){throw new Error("symbol '"+_1e+"' is not defined after loading '"+_21+"'");}}return _20;};dojo.provide=function(_24){_24=_24+"";return (d._loadedModules[_24]=d.getObject(_24,true));};dojo.platformRequire=function(_25){var _26=_25["common"]||[];var _27=_26.concat(_25[d._name]||_25["default"]||[]);for(var x=0;x<_27.length;x++){var _29=_27[x];if(_29.constructor==Array){d._loadModule.apply(d,_29);}else{d._loadModule(_29);}}};dojo.requireIf=function(_2a,_2b){if(_2a===true){var _2c=[];for(var i=1;i<arguments.length;i++){_2c.push(arguments[i]);}d.require.apply(d,_2c);}};dojo.requireAfterIf=d.requireIf;dojo.registerModulePath=function(_2e,_2f){d._modulePrefixes[_2e]={name:_2e,value:_2f};};dojo.requireLocalization=function(_30,_31,_32,_33){d.require("dojo.i18n");d.i18n._requireLocalization.apply(d.hostenv,arguments);};var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$");var ire=new RegExp("^((([^:]+:)?([^@]+))@)?([^:]*)(:([0-9]+))?$");dojo._Url=function(){var n=null;var _a=arguments;var uri=_a[0];for(var i=1;i<_a.length;i++){if(!_a[i]){continue;}var _3a=new d._Url(_a[i]+"");var _3b=new d._Url(uri+"");if((_3a.path=="")&&(!_3a.scheme)&&(!_3a.authority)&&(!_3a.query)){if(_3a.fragment!=n){_3b.fragment=_3a.fragment;}_3a=_3b;}else{if(!_3a.scheme){_3a.scheme=_3b.scheme;if(!_3a.authority){_3a.authority=_3b.authority;if(_3a.path.charAt(0)!="/"){var _3c=_3b.path.substring(0,_3b.path.lastIndexOf("/")+1)+_3a.path;var _3d=_3c.split("/");for(var j=0;j<_3d.length;j++){if(_3d[j]=="."){if(j==_3d.length-1){_3d[j]="";}else{_3d.splice(j,1);j--;}}else{if(j>0&&!(j==1&&_3d[0]=="")&&_3d[j]==".."&&_3d[j-1]!=".."){if(j==(_3d.length-1)){_3d.splice(j,1);_3d[j-1]="";}else{_3d.splice(j-1,2);j-=2;}}}}_3a.path=_3d.join("/");}}}}uri="";if(_3a.scheme){uri+=_3a.scheme+":";}if(_3a.authority){uri+="//"+_3a.authority;}uri+=_3a.path;if(_3a.query){uri+="?"+_3a.query;}if(_3a.fragment){uri+="#"+_3a.fragment;}}this.uri=uri.toString();var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[5];this.port=r[7]||n;}};dojo._Url.prototype.toString=function(){return this.uri;};dojo.moduleUrl=function(_40,url){var loc=dojo._getModuleSymbols(_40).join("/");if(!loc){return null;}if(loc.lastIndexOf("/")!=loc.length-1){loc+="/";}var _43=loc.indexOf(":");if(loc.charAt(0)!="/"&&(_43==-1||_43>loc.indexOf("/"))){loc=d.baseUrl+loc;}return new d._Url(loc,url);};})();}