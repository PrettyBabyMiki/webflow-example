<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	    		xmlns:ui="http://java.sun.com/jsf/facelets"
	  			xmlns:h="http://java.sun.com/jsf/html"
	  			xmlns:f="http://java.sun.com/jsf/core"
	  			xmlns:sf="http://www.springframework.org/tags/faces"
				template="/template.xhtml">

<ui:define name="content">
	<ui:fragment id="hotelSearchFragment">
		<div id="hotelSearch" class="section">
		    <span class="errors">
		       <h:messages globalOnly="true"/>
		    </span>
			<h2>Search Hotels</h2>

					<h:form id="mainForm">
						<br/>
						<br/>
						<fieldset>
							<div class="searchGroup">
								<div class="searchField">
								<sf:clientTextValidator promptMessage="Search hotels by name, address, city or zip.">
									<h:inputText id="searchString" value="#{searchCriteria.searchString}" style="width: 165px; height: 15px;"/>
								</sf:clientTextValidator>
								</div>
								<div class="searchSize">
								   	<h:outputLabel for="pageSize">Maximum results:</h:outputLabel>
								   	<h:selectOneMenu value="#{searchCriteria.pageSize}" id="pageSize">
										<f:selectItem itemLabel="5" itemValue="5"/>
									    <f:selectItem itemLabel="10" itemValue="10"/>
									    <f:selectItem itemLabel="20" itemValue="20"/>
									</h:selectOneMenu>  
						   		</div>
								<div class="searchButton">
									<sf:commandButton id="findHotels" value="Find Hotels" ajaxEnabled="false" actionListener="#{searchCriteria.findHotelsListener}" action="findHotels"/>
								</div>
							</div>
					    </fieldset>
					</h:form>
			  
		</div>
	</ui:fragment>

	<ui:fragment id="bookingsSection">
		<div class="section">
			<h:form id="bookingsForm">
				<h2>Current Hotel Bookings</h2>
				
				<h:outputText value="No Bookings Found" rendered="#{bookings.rowCount == 0}"/>
				<h:dataTable id="bookings" styleClass="summary" value="#{bookings}" var="booking" rendered="#{bookings.rowCount > 0}">
					<h:column>
						<f:facet name="header">Name</f:facet>
						#{booking.hotel.name}
					</h:column>
					<h:column>
						<f:facet name="header">Address</f:facet>
						#{booking.hotel.address}
					</h:column>
					<h:column>
						<f:facet name="header">City, State</f:facet>
						#{booking.hotel.city}, #{booking.hotel.state}
					</h:column>
			        <h:column>
			            <f:facet name="header">Check in date</f:facet>
			            <h:outputText value="#{booking.checkinDate}"/>
			        </h:column>
			        <h:column>
			            <f:facet name="header">Check out date</f:facet>
			            <h:outputText value="#{booking.checkoutDate}"/>
			        </h:column>
					<h:column>
						<f:facet name="header">Confirmation number</f:facet>
						#{booking.id}
					</h:column>
					<h:column>
						<f:facet name="header">Action</f:facet>
						<!-- @TODO - THIS LINK DOES NOT WORK ON MYFACES 1.2.0 WHEN AJAX IS ENABLED BECAUSE THEY HAVE NOT IMPLEMENTED UIData.invokeOnComponent -->			
						<sf:commandLink id="cancel" value="Cancel" ajaxEnabled="false" processIds="bookingsSection" action="cancelBooking"/>
					</h:column>
				</h:dataTable>
			</h:form>
		</div>
	</ui:fragment>
</ui:define>

</ui:composition>